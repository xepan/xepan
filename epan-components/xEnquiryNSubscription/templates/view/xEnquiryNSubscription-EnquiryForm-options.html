<div id='{$_name}' class='epan-component-options' component_type="{$component_type}">
	<div class="panel-group" id="accordion">
		<div class="xepan-collasp-header component-header">
		 	<div class="panel-heading">
		      	<h3 class="panel-title">
		        	<a data-toggle="collapse" data-parent="#accordion"	 href="#collapse-enquiry-basic">
						{$component_type_name}
		        	</a>
		      	</h3>
		   	</div>
		 	<div id="collapse-enquiry-basic" class="panel-			collapse collapse">
		      	<div class="panel-body">
		      		<div class='xepan-collasp-header'>
						<table class="table table-condensed table-hover">
						<tr>
							<td>
								<b>Receipent</b>
							</td>
							<td>
								<input type='text' id='epan-enquiryform-option-receipent' style='width:100%'/>
							</td>
						</tr>
						<tr>
							<td colspan="12">
								<div class="panel panel-default">
									<div class="panel-heading">
										<h3 class="panel-title">
										<a data-toggle="collapse" data-parent="#accordion" href="#epan-component-enquiryform-fields-options">Form Fields
										</a>
										</h3>
									</div>
									<div id="epan-component-enquiryform-fields-options" class="panel-collapse collapse">
										<div class="panel-body">
											<ul id='epan-component-option-form-elements'>
												
											</ul>
										</div>
									</div>
								</div>
							</td>
						</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>					

			<div><button id='xEnquirySubscrenquiryServerSide'>Manage Enquiry Form</button></div>
</div>
<script type="text/javascript">
// ========== OPTION TO COMPONENT EFFECT ==============
// 
// $(your_option_html_element).click(function(event,ui){
// 		$(current_selected_component).what to do ???
// }) 
$('#xEnquirySubscrenquiryServerSide').click(function(event){
	$('#epan-quick-component-options').toggle('slideup');
	$.univ.frameURL('Enquiry Form','index.php?page=xEnquiryNSubscription_page_owner_main')
});

var epan_form_option_item_moving = undefined;
$('#epan-enquiryform-option-receipent').keyup(function(event){
	$(current_selected_component).attr('email_to',$(this).val());
	var emailRegexStr = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
	var isvalid = emailRegexStr.test($(this).val());
	if(isvalid){
		$(current_selected_component).css('outline','');
	}else{
		$(current_selected_component).css('outline','2px solid red');
	}
});
$('#epan-component-option-form-elements').sortable({
	stop : function(event,ui) {
		$('#'+$(current_selected_component).attr('id') +' .epan-form-fields-rows .row:nth-child('+(epan_form_option_item_moving+1)+')')
				.insertBefore('#'+$(current_selected_component).attr('id') + ' .epan-form-fields-rows .row:nth-child('+ (parseInt(ui.item.index())+1)+')');
		console.log('moving from ' +
					(epan_form_option_item_moving+1) +
					' to ' +
					(parseInt(ui.item.index())+1));
	},
	start: function(event,ui){
		epan_form_option_item_moving = ui.item.index();
	}
});
var {$component_type}_options = {
show: function (){
$('#epan-enquiryform-option-receipent').val($(current_selected_component).attr('email_to'));
$('#epan-component-option-form-elements').children().remove();
$(current_selected_component).find('.row').each(function(index, el) {
slide = $('<li>').html(
	$(el)
	.find('.form-field-title').html()
	).appendTo('#epan-component-option-form-elements')
	;
	});
	// $('#epan-component-option-form-elements').selectable();
	}
	}
	</script>
